{"ast":null,"code":"import _regeneratorRuntime from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import'./style.css';import{LoginContext}from'../../LoginContext';import{useHistory}from'react-router-dom';var axios=require('axios');function LoginPage(props){//for global context\nvar _useContext=useContext(LoginContext),_useContext2=_slicedToArray(_useContext,2),userEmail=_useContext2[0],setUserEmail=_useContext2[1];//loval state\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];//used to redirect Route\nvar history=useHistory();//when user signs in, checks credentials, either reports error, or updates global context and routes user to home\nfunction signIn(_x){return _signIn.apply(this,arguments);}function _signIn(){_signIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var loginCredentials,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// console.log('searching db for user', email, 'with password', password );\nloginCredentials={email:email,password:password};// route for server to check credentials\n_context.next=4;return axios.post('http://localhost:5000/api/checkUser',loginCredentials);case 4:response=_context.sent;console.log('response',response);if(response.data==='success'){alert('login successful');setUserEmail(email);localStorage.setItem('userEmail',JSON.stringify(email));history.push(\"/home\");}else{alert('wrong email/password');}case 7:case\"end\":return _context.stop();}}},_callee);}));return _signIn.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"header\",{className:\"header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\",id:\"headerRow\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"col-4\",id:\"title\"},\"Goal Tracker\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"}),/*#__PURE__*/React.createElement(\"form\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},className:\"form-control\",id:\"email\",placeholder:\"email\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},className:\"form-control\",id:\"password\",placeholder:\"password\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4\"},/*#__PURE__*/React.createElement(\"button\",{value:\"Submit\",onClick:signIn,className:\"btn btn-primary\",id:\"login-Btn\"},\"Login\"))))));}export default LoginPage;","map":{"version":3,"sources":["/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/src/components/Login/LoginBox.js"],"names":["React","useState","useContext","LoginContext","useHistory","axios","require","LoginPage","props","userEmail","setUserEmail","email","setEmail","password","setPassword","history","signIn","e","preventDefault","loginCredentials","post","response","console","log","data","alert","localStorage","setItem","JSON","stringify","push","target","value"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,UAAzB,KAA0C,OAA1C,CACA,MAAO,aAAP,CACA,OAAQC,YAAR,KAA2B,oBAA3B,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CAEA,GAAMC,CAAAA,KAAK,CAAGC,OAAO,CAAC,OAAD,CAArB,CAGA,QAASC,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,CACtB;AADsB,gBAEcN,UAAU,CAAEC,YAAF,CAFxB,4CAEdM,SAFc,iBAEHC,YAFG,iBAGtB;AAHsB,cAIMT,QAAQ,CAAC,EAAD,CAJd,wCAIdU,KAJc,eAIPC,QAJO,8BAKWX,QAAQ,CAAC,EAAD,CALnB,yCAKdY,QALc,eAKJC,WALI,eAMtB;AACA,GAAMC,CAAAA,OAAO,CAAGX,UAAU,EAA1B,CAEA;AATsB,QAUPY,CAAAA,MAVO,8HAUtB,iBAAsBC,CAAtB,gJACIA,CAAC,CAACC,cAAF,GACA;AAEMC,gBAJV,CAI6B,CACrBR,KAAK,CAAGA,KADa,CAErBE,QAAQ,CAAGA,QAFU,CAJ7B,CAQI;AARJ,sBAS2BR,CAAAA,KAAK,CAACe,IAAN,CAAY,qCAAZ,CAAmDD,gBAAnD,CAT3B,QASUE,QATV,eAUIC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBF,QAAxB,EAEA,GAAKA,QAAQ,CAACG,IAAT,GAAkB,SAAvB,CAAkC,CAC/BC,KAAK,CAAE,kBAAF,CAAL,CACAf,YAAY,CAAEC,KAAF,CAAZ,CACAe,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAiCC,IAAI,CAACC,SAAL,CAAgBlB,KAAhB,CAAjC,EACAI,OAAO,CAACe,IAAR,CAAa,OAAb,EACF,CALD,IAKO,CACHL,KAAK,CAAE,sBAAF,CAAL,CACH,CAnBL,sDAVsB,yCA+BtB,mBACI,8BAAQ,SAAS,CAAC,QAAlB,eACI,2BAAK,SAAS,CAAC,KAAf,CAAqB,EAAE,CAAC,WAAxB,eACI,0BAAI,SAAS,CAAC,OAAd,CAAsB,EAAE,CAAC,OAAzB,iBADJ,cAEI,2BAAK,SAAS,CAAC,OAAf,EAFJ,cAGI,4BAAM,SAAS,CAAC,OAAhB,eACI,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,UAAf,eACI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAEd,KAA1B,CAAiC,QAAQ,CAAE,kBAAAM,CAAC,QAAIL,CAAAA,QAAQ,CAACK,CAAC,CAACc,MAAF,CAASC,KAAV,CAAZ,EAA5C,CAA0E,SAAS,CAAC,cAApF,CAAmG,EAAE,CAAC,OAAtG,CAA8G,WAAW,CAAC,OAA1H,EADJ,CADJ,cAII,2BAAK,SAAS,CAAC,UAAf,eACI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAEnB,QAA1B,CAAoC,QAAQ,CAAE,kBAAAI,CAAC,QAAIH,CAAAA,WAAW,CAACG,CAAC,CAACc,MAAF,CAASC,KAAV,CAAf,EAA/C,CAAgF,SAAS,CAAC,cAA1F,CAAyG,EAAE,CAAC,UAA5G,CAAuH,WAAW,CAAC,UAAnI,EADJ,CAJJ,cAOI,2BAAK,SAAS,CAAC,OAAf,eACI,8BAAS,KAAK,CAAC,QAAf,CAAwB,OAAO,CAAEhB,MAAjC,CAAyC,SAAS,CAAC,iBAAnD,CAAoE,EAAE,CAAC,WAAvE,UADJ,CAPJ,CADJ,CAHJ,CADJ,CADJ,CAqBH,CAGD,cAAeT,CAAAA,SAAf","sourcesContent":["import React, {useState, useContext} from 'react';\nimport './style.css'\nimport {LoginContext} from '../../LoginContext'\nimport {useHistory} from 'react-router-dom';\n\nconst axios = require('axios');\n\n\nfunction LoginPage(props) {\n    //for global context\n    const [ userEmail, setUserEmail ] = useContext( LoginContext );\n    //loval state\n    const [ email, setEmail ] = useState('');\n    const [ password, setPassword] = useState('');\n    //used to redirect Route\n    const history = useHistory();\n\n    //when user signs in, checks credentials, either reports error, or updates global context and routes user to home\n    async function signIn(e) {\n        e.preventDefault();\n        // console.log('searching db for user', email, 'with password', password );\n        \n        const loginCredentials = {\n            email : email,\n            password : password\n        }\n        // route for server to check credentials\n        const response = await axios.post( 'http://localhost:5000/api/checkUser', loginCredentials );\n        console.log('response', response );\n\n        if ( response.data === 'success' ){\n           alert( 'login successful' );\n           setUserEmail( email );\n           localStorage.setItem('userEmail',JSON.stringify( email ));\n           history.push(\"/home\")\n        } else {\n            alert( 'wrong email/password')\n        }\n    }\n    return(\n        <header className=\"header\">\n            <div className='row' id='headerRow'>\n                <h1 className='col-4' id='title'>Goal Tracker</h1 >\n                <div className='col-4'></div >\n                <form className='col-4'>\n                    <div className='row'>\n                        <div className='col-md-4'>\n                            <input type=\"text\" value={email} onChange={e => setEmail(e.target.value)} className='form-control' id='email' placeholder='email' />\n                            </div>\n                        <div className='col-md-4'>\n                            <input type=\"text\" value={password} onChange={e => setPassword(e.target.value)} className='form-control' id='password' placeholder='password'/>\n                        </div>\n                        <div className='col-4'>\n                            <button  value=\"Submit\" onClick={signIn} className=\"btn btn-primary\"id='login-Btn'>Login</button>\n                        </div>\n                    </div>\n                </form >\n            </div>\n        </header>\n    )\n}\n\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}