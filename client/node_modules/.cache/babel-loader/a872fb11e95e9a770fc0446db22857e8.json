{"ast":null,"code":"import _regeneratorRuntime from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from\"react\";import SearchBox from'./SearchBox';import SearchResult from'./SearchResult';import axios from'axios';function SearchPage(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),display=_useState4[0],setDisplay=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),forsearch=_useState6[0],setForsearch=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),alert=_useState8[0],setAlert=_useState8[1];var btn=useRef();var btnStyle={width:'20%',padding:'0px'};var inputtag={width:'70%'};var liStyle={width:'70%'};var form={display:'flex',flexDirection:'row',marginTop:'10px'};var ulStyle={padding:'0px',margin:'0px'};var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),input=_useState10[0],setInput=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),namesList=_useState12[0],setnamesList=_useState12[1];function handleChange(_x){return _handleChange.apply(this,arguments);}function _handleChange(){_handleChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var i,userInfo,userdata,newList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:i=e.target.value;console.log(i);// const input = e.target.value;\n_context.next=4;return axios.get('/api/allusers');case 4:userInfo=_context.sent;userdata=userInfo.data;console.log(userdata);if(i.length>=1&&i.length<=2){userdata.forEach(function(item){console.log(\"[name received]\",item.firstName);namesList.push(item.firstName);});}console.log(namesList);if(i.length>1){console.log(\"entering this loop\");newList=namesList.filter(function(name){return name.indexOf(i)==0;});console.log('[new list received ]',newList);setInput(i);setForsearch(i);setnamesList(newList);}else{setInput(i);setnamesList([]);}case 10:case\"end\":return _context.stop();}}},_callee);}));return _handleChange.apply(this,arguments);}function search(){return _search.apply(this,arguments);}function _search(){_search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var userResult;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"[input Received]\",input);_context2.next=3;return axios.get(\"/api/user/\".concat(input));case 3:userResult=_context2.sent;console.log(\"[user received ]\",userResult);setDisplay(true);setResult(userResult.data[0].firstName);setForsearch(userResult.data[0]._id);setnamesList([]);setInput('');case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _search.apply(this,arguments);}function addFollower(){return _addFollower.apply(this,arguments);}function _addFollower(){_addFollower=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var user,object,apiResult;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:user=JSON.parse(localStorage.getItem('user'));console.log('[input Received]',forsearch);object={id:forsearch,userid:user._id};console.log(\"[object to be posted]\",object);apiResult=axios.post('/api/addFollowing',object);console.log('[Added to following]',apiResult);btn.current.setAttribute('disabled');setAlert('Add to the Following List ..!!');case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _addFollower.apply(this,arguments);}if(display){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{class:\"alert alert-secondary\",role:\"alert\"},alert),/*#__PURE__*/React.createElement(\"form\",{style:form},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",style:inputtag,onChange:handleChange,placeholder:\"Search\",value:input,\"aria-label\":\"Search\"}),/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-primary\",style:btnStyle,onClick:search,type:\"button\"},\"Search\")),/*#__PURE__*/React.createElement(\"ul\",null,namesList.map(function(name){return/*#__PURE__*/React.createElement(\"li\",{class:\"list-group-item\",style:liStyle,onClick:function onClick(){return setInput(name);}},name);})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SearchResult,{result:result,btn:btn,addFollower:addFollower}))));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{class:\"alert alert-secondary\",role:\"alert\"},alert),/*#__PURE__*/React.createElement(\"form\",{style:form},/*#__PURE__*/React.createElement(\"input\",{class:\"form-control\",style:inputtag,type:\"text\",onChange:handleChange,placeholder:\"Search\",value:input,\"aria-label\":\"Search\"}),/*#__PURE__*/React.createElement(\"button\",{class:\"btn btn-primary\",onClick:search,style:btnStyle,type:\"button\"},\"Search\")),/*#__PURE__*/React.createElement(\"ul\",{style:ulStyle},namesList.map(function(name){return/*#__PURE__*/React.createElement(\"li\",{class:\"list-group-item\",style:liStyle,onClick:function onClick(){return setInput(name);}},name);}))));}}export default SearchPage;","map":{"version":3,"sources":["/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/src/components/Search/SearchPage.js"],"names":["React","useState","useRef","SearchBox","SearchResult","axios","SearchPage","props","result","setResult","display","setDisplay","forsearch","setForsearch","alert","setAlert","btn","btnStyle","width","padding","inputtag","liStyle","form","flexDirection","marginTop","ulStyle","margin","input","setInput","namesList","setnamesList","handleChange","e","i","target","value","console","log","get","userInfo","userdata","data","length","forEach","item","firstName","push","newList","filter","name","indexOf","search","userResult","_id","addFollower","user","JSON","parse","localStorage","getItem","object","id","userid","apiResult","post","current","setAttribute","map"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport SearchBox from './SearchBox';\nimport SearchResult from './SearchResult';\nimport axios from 'axios';\n\nfunction SearchPage(props) {\n  const [result, setResult] = useState('');\n  const [display,setDisplay] = useState(false);\n  const [forsearch,setForsearch] = useState('');\n  const [alert,setAlert] =useState('');\n  const btn = useRef();\n  const btnStyle={\n    width:'20%',\n    padding:'0px'\n  }\n  const inputtag = {\n    width:'70%'\n  }\n  const liStyle ={\n    width:'70%'\n  }\n  const form = {\n    display:'flex',\n    flexDirection:'row',\n    marginTop:'10px'\n  }\n  const ulStyle = {\n    padding:'0px',\n    margin:'0px'\n  }\n  \n  const [input, setInput] = useState('');\n  const [namesList, setnamesList] = useState([]);\n  \n  async function handleChange(e) {\n    const i = e.target.value;\n    console.log(i);\n    \n    // const input = e.target.value;\n    const userInfo = await axios.get('/api/allusers')\n    const userdata = userInfo.data;\n    console.log(userdata);\n    if (i.length >= 1 && i.length <= 2) {\n      userdata.forEach(function (item) {\n        console.log(`[name received]`,item.firstName);\n        namesList.push(item.firstName);\n      });\n    }\n    console.log(namesList);\n    \n    if (i.length > 1 ){\n      console.log(`entering this loop`)\n      const newList = namesList.filter(name => name.indexOf(i)==0);\n      console.log('[new list received ]',newList)\n      setInput(i);\n      setForsearch(i);\n      setnamesList(newList)\n    } else {\n      setInput(i);\n      setnamesList([]);\n    }\n\n  }\n\n\n  async function search() {\n    console.log(`[input Received]`,input);\n    const userResult = await axios.get(`/api/user/${input}`)\n    console.log(`[user received ]`,userResult);\n    setDisplay(true);\n    setResult(userResult.data[0].firstName);\n    setForsearch(userResult.data[0]._id);\n    setnamesList([]);\n    setInput('');\n  }\n async  function addFollower(){\n    const user = JSON.parse(localStorage.getItem('user'));\n    console.log('[input Received]',forsearch);  \n  \n   const  object ={\n      id:forsearch,\n      userid:user._id\n    }\n    console.log(`[object to be posted]`,object);\n    const apiResult = axios.post('/api/addFollowing',object);\n    console.log('[Added to following]',apiResult);\n    btn.current.setAttribute('disabled');\n    setAlert('Add to the Following List ..!!');\n    \n  }\n\nif (display){\n  return (\n    <>\n      <div>\n        <div class=\"alert alert-secondary\" role=\"alert\">\n        {alert}\n        </div>\n        <form style={form}>\n          <input  type=\"text\" style={inputtag} onChange={handleChange} placeholder=\"Search\" value={input} aria-label=\"Search\" />\n          <button class=\"btn btn-primary\"  style={btnStyle}  onClick={search} type=\"button\">Search</button>\n        </form>\n        <ul>{namesList.map(name => <li class=\"list-group-item\" style={liStyle} onClick={() => setInput(name)}>{name}</li>)}</ul>\n        <div>\n          <SearchResult result={result} btn={btn} addFollower={addFollower} />\n        </div>\n      </div>\n    </>\n  )\n}\nelse{\n\n  return (\n    <>\n      <div >\n      <div class=\"alert alert-secondary\" role=\"alert\">\n        {alert}\n        </div>\n        <form style={form}>\n          <input class=\"form-control\"  style={inputtag} type=\"text\" onChange={handleChange} placeholder=\"Search\" value={input} aria-label=\"Search\" />\n          <button class=\"btn btn-primary\" onClick={search} style={btnStyle} type=\"button\">Search</button>\n        </form>\n        <ul style={ulStyle}>{namesList.map(name => <li class=\"list-group-item\" style={liStyle} onClick={() => setInput(name)}>{name}</li>)}</ul>\n      </div>\n    </>\n  )\n  }\n}\nexport default SearchPage;"]},"metadata":{},"sourceType":"module"}