{"ast":null,"code":"import _regeneratorRuntime from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import SearchBox from'./SearchBox';import SearchResult from'./SearchResult';import axios from'axios';function SearchPage(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),result=_useState2[0],setResult=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),display=_useState4[0],setDisplay=_useState4[1];var style={SearchBox:{border:\"0px solid Black\"},SearchResult:{border:\"0px solid Yellow\"}};var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),input=_useState6[0],setInput=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),namesList=_useState8[0],setnamesList=_useState8[1];var user;function handleChange(_x){return _handleChange.apply(this,arguments);}function _handleChange(){_handleChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var i,userInfo,userdata,newList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:i=e.target.value;console.log(i);// const input = e.target.value;\n_context.next=4;return axios.get('/api/allusers');case 4:userInfo=_context.sent;userdata=userInfo.data;console.log(userdata);if(i.length>=1||i.length<=2){userdata.forEach(function(item){console.log(\"[name received]\",item.firstName);namesList.push(item.firstName);});}console.log(namesList);if(i.length>1){console.log(\"entering this loop\");newList=namesList.filter(function(name){return name.indexOf(i)==0;});console.log('[new list received ]',newList);setInput(i);setnamesList(newList);}else{setInput(i);setnamesList([]);}case 10:case\"end\":return _context.stop();}}},_callee);}));return _handleChange.apply(this,arguments);}function search(){return _search.apply(this,arguments);}function _search(){_search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"[input Received]\",input);_context2.next=3;return axios.get(\"/api/user/\".concat(input));case 3:user=_context2.sent;console.log(\"[user received ]\",user);setDisplay(true);setResult(user.data[0].firstName);setnamesList([]);setInput('');case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _search.apply(this,arguments);}function addFollower(){var user=JSON.parse(localStorage.getItem('user'));var object={id:user.data[0]._id,userid:user._id};console.log(\"[object to be posted]\",object);}if(display){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex flex-column h-100\"},/*#__PURE__*/React.createElement(\"form\",{class:\"form-inline md-form mr-auto mb-4\"},/*#__PURE__*/React.createElement(\"input\",{class:\"form-control mr-sm-2\",type:\"text\",onChange:handleChange,placeholder:\"Search\",value:input,\"aria-label\":\"Search\"}),/*#__PURE__*/React.createElement(\"button\",{class:\"btn aqua-gradient btn-rounded btn-sm my-0\",onClick:search,type:\"button\"},\"Search\")),/*#__PURE__*/React.createElement(\"ul\",null,namesList.map(function(name){return/*#__PURE__*/React.createElement(\"li\",{class:\"list-group-item\",onClick:function onClick(){return setInput(name);}},name);})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SearchResult,{result:result,addFollower:addFollower}))));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{class:\"d-flex flex-column h-100\"},/*#__PURE__*/React.createElement(\"form\",{class:\"form-inline md-form mr-auto mb-4\"},/*#__PURE__*/React.createElement(\"input\",{class:\"form-control mr-sm-2\",type:\"text\",onChange:handleChange,placeholder:\"Search\",value:input,\"aria-label\":\"Search\"}),/*#__PURE__*/React.createElement(\"button\",{class:\"btn aqua-gradient btn-rounded btn-sm my-0\",onClick:search,type:\"button\"},\"Search\")),/*#__PURE__*/React.createElement(\"ul\",null,namesList.map(function(name){return/*#__PURE__*/React.createElement(\"li\",{class:\"list-group-item\",onClick:function onClick(){return setInput(name);}},name);}))));}}export default SearchPage;","map":{"version":3,"sources":["/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/src/components/Search/SearchPage.js"],"names":["React","useState","SearchBox","SearchResult","axios","SearchPage","props","result","setResult","display","setDisplay","style","border","input","setInput","namesList","setnamesList","user","handleChange","e","i","target","value","console","log","get","userInfo","userdata","data","length","forEach","item","firstName","push","newList","filter","name","indexOf","search","addFollower","JSON","parse","localStorage","getItem","object","id","_id","userid","map"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport SearchBox from './SearchBox';\nimport SearchResult from './SearchResult';\nimport axios from 'axios';\nfunction SearchPage(props) {\n  const [result, setResult] = useState('');\n  const [display,setDisplay] = useState(false);\n\n  const style = {\n    SearchBox: {\n      border: \"0px solid Black\"\n    },\n    SearchResult: {\n      border: \"0px solid Yellow\"\n    }\n  }\n  const [input, setInput] = useState('');\n  const [namesList, setnamesList] = useState([]);\n  let user;\n  async function handleChange(e) {\n    const i = e.target.value;\n    console.log(i);\n    \n    // const input = e.target.value;\n    const userInfo = await axios.get('/api/allusers')\n    const userdata = userInfo.data;\n    console.log(userdata);\n    if (i.length >= 1 || i.length <= 2) {\n      userdata.forEach(function (item) {\n        console.log(`[name received]`,item.firstName);\n        namesList.push(item.firstName);\n      });\n    }\n    console.log(namesList);\n    \n    if (i.length > 1 ){\n      console.log(`entering this loop`)\n      const newList = namesList.filter(name => name.indexOf(i)==0);\n      console.log('[new list received ]',newList)\n      setInput(i);\n      setnamesList(newList)\n    } else {\n      setInput(i);\n      setnamesList([]);\n    }\n\n  }\n\n\n  async function search() {\n    console.log(`[input Received]`,input);\n     user = await axios.get(`/api/user/${input}`)\n    console.log(`[user received ]`,user);\n    setDisplay(true);\n    setResult(user.data[0].firstName);\n    setnamesList([]);\n    setInput('');\n  }\n  function addFollower(){\n    const user = JSON.parse(localStorage.getItem('user'));\n   const  object ={\n      id:user.data[0]._id,\n      userid:user._id\n    }\n    console.log(`[object to be posted]`,object);\n  }\n\nif (display){\n  return (\n    <>\n      <div class=\"d-flex flex-column h-100\">\n        <form class=\"form-inline md-form mr-auto mb-4\">\n          <input class=\"form-control mr-sm-2\" type=\"text\" onChange={handleChange} placeholder=\"Search\" value={input} aria-label=\"Search\" />\n          <button class=\"btn aqua-gradient btn-rounded btn-sm my-0\" onClick={search} type=\"button\">Search</button>\n        </form>\n        <ul>{namesList.map(name => <li class=\"list-group-item\" onClick={() => setInput(name)}>{name}</li>)}</ul>\n        <div>\n          <SearchResult result={result} addFollower={addFollower} />\n        </div>\n      </div>\n    </>\n  )\n}\nelse{\n\n  return (\n    <>\n      <div class=\"d-flex flex-column h-100\">\n        <form class=\"form-inline md-form mr-auto mb-4\">\n          <input class=\"form-control mr-sm-2\" type=\"text\" onChange={handleChange} placeholder=\"Search\" value={input} aria-label=\"Search\" />\n          <button class=\"btn aqua-gradient btn-rounded btn-sm my-0\" onClick={search} type=\"button\">Search</button>\n        </form>\n        <ul>{namesList.map(name => <li class=\"list-group-item\" onClick={() => setInput(name)}>{name}</li>)}</ul>\n      </div>\n    </>\n  )\n  }\n}\nexport default SearchPage;"]},"metadata":{},"sourceType":"module"}