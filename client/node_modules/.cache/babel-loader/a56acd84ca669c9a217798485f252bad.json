{"ast":null,"code":"var _jsxFileName = \"/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/src/components/Search/SearchPage.js\";\nimport React, { useState, useRef } from \"react\";\nimport SearchBox from './SearchBox';\nimport SearchResult from './SearchResult';\nimport axios from 'axios';\n\nfunction SearchPage(props) {\n  const [result, setResult] = useState('');\n  const [display, setDisplay] = useState(false);\n  const [forsearch, setForsearch] = useState('');\n  const [alert, setAlert] = useState('');\n  const btn = useRef();\n  const alertStyle = {\n    backgroundColor: 'white'\n  };\n  const btnStyle = {\n    width: '20%',\n    padding: '0px'\n  };\n  const inputtag = {\n    width: '70%'\n  };\n  const liStyle = {\n    width: '70%'\n  };\n  const form = {\n    display: 'flex',\n    flexDirection: 'row',\n    marginTop: '10px'\n  };\n  const ulStyle = {\n    padding: '0px',\n    margin: '0px'\n  };\n  const [input, setInput] = useState('');\n  const [namesList, setnamesList] = useState([]);\n\n  async function handleChange(e) {\n    const i = e.target.value;\n    console.log(i); // const input = e.target.value;\n\n    const userInfo = await axios.get('/api/allusers');\n    const userdata = userInfo.data;\n    console.log(userdata);\n\n    if (i.length >= 1 && i.length <= 2) {\n      userdata.forEach(function (item) {\n        console.log(`[name received]`, item.firstName);\n        namesList.push(item.firstName);\n      });\n    }\n\n    console.log(namesList);\n\n    if (i.length > 1) {\n      console.log(`entering this loop`);\n      const newList = namesList.filter(name => name.indexOf(i) == 0);\n      console.log('[new list received ]', newList);\n      setInput(i);\n      setForsearch(i);\n      setnamesList(newList);\n    } else {\n      setInput(i);\n      setnamesList([]);\n    }\n  }\n\n  async function search() {\n    console.log(`[input Received]`, input);\n    const userResult = await axios.get(`/api/user/${input}`);\n    console.log(`[user received ]`, userResult);\n    setDisplay(true);\n    setResult(userResult.data[0].firstName);\n    setForsearch(userResult.data[0]._id);\n    setnamesList([]);\n    setInput('');\n  }\n\n  async function addFollower() {\n    const user = JSON.parse(localStorage.getItem('user'));\n    console.log('[input Received]', forsearch);\n    const object = {\n      id: forsearch,\n      userid: user._id\n    };\n    console.log(`[object to be posted]`, object);\n    const apiResult = axios.post('/api/addFollowing', object);\n    console.log('[Added to following]', apiResult);\n  }\n\n  if (display) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      style: form,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      style: inputtag,\n      onChange: handleChange,\n      placeholder: \"Search\",\n      value: input,\n      \"aria-label\": \"Search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn btn-primary\",\n      style: btnStyle,\n      onClick: search,\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, \"Search\")), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, namesList.map(name => /*#__PURE__*/React.createElement(\"li\", {\n      class: \"list-group-item\",\n      style: liStyle,\n      onClick: () => setInput(name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 36\n      }\n    }, name))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SearchResult, {\n      result: result,\n      btn: btn,\n      addFollower: addFollower,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }))));\n  } else {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      style: form,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      class: \"form-control\",\n      style: inputtag,\n      type: \"text\",\n      onChange: handleChange,\n      placeholder: \"Search\",\n      value: input,\n      \"aria-label\": \"Search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn btn-primary\",\n      onClick: search,\n      style: btnStyle,\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, \"Search\")), /*#__PURE__*/React.createElement(\"ul\", {\n      style: ulStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, namesList.map(name => /*#__PURE__*/React.createElement(\"li\", {\n      class: \"list-group-item\",\n      style: liStyle,\n      onClick: () => setInput(name),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 52\n      }\n    }, name)))));\n  }\n}\n\nexport default SearchPage;","map":{"version":3,"sources":["/Users/koustubmanchiraju/Documents/BootCamp/goalTracker/client/src/components/Search/SearchPage.js"],"names":["React","useState","useRef","SearchBox","SearchResult","axios","SearchPage","props","result","setResult","display","setDisplay","forsearch","setForsearch","alert","setAlert","btn","alertStyle","backgroundColor","btnStyle","width","padding","inputtag","liStyle","form","flexDirection","marginTop","ulStyle","margin","input","setInput","namesList","setnamesList","handleChange","e","i","target","value","console","log","userInfo","get","userdata","data","length","forEach","item","firstName","push","newList","filter","name","indexOf","search","userResult","_id","addFollower","user","JSON","parse","localStorage","getItem","object","id","userid","apiResult","post","map"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport SearchBox from './SearchBox';\nimport SearchResult from './SearchResult';\nimport axios from 'axios';\n\nfunction SearchPage(props) {\n  const [result, setResult] = useState('');\n  const [display,setDisplay] = useState(false);\n  const [forsearch,setForsearch] = useState('');\n  const [alert,setAlert] =useState('');\n  const btn = useRef();\n  const alertStyle={\n    backgroundColor:'white'\n  }\n  const btnStyle={\n    width:'20%',\n    padding:'0px'\n  }\n  const inputtag = {\n    width:'70%'\n  }\n  const liStyle ={\n    width:'70%'\n  }\n  const form = {\n    display:'flex',\n    flexDirection:'row',\n    marginTop:'10px'\n  }\n  const ulStyle = {\n    padding:'0px',\n    margin:'0px'\n  }\n  \n  const [input, setInput] = useState('');\n  const [namesList, setnamesList] = useState([]);\n  \n  async function handleChange(e) {\n    const i = e.target.value;\n    console.log(i);\n    \n    // const input = e.target.value;\n    const userInfo = await axios.get('/api/allusers')\n    const userdata = userInfo.data;\n    console.log(userdata);\n    if (i.length >= 1 && i.length <= 2) {\n      userdata.forEach(function (item) {\n        console.log(`[name received]`,item.firstName);\n        namesList.push(item.firstName);\n      });\n    }\n    console.log(namesList);\n    \n    if (i.length > 1 ){\n      console.log(`entering this loop`)\n      const newList = namesList.filter(name => name.indexOf(i)==0);\n      console.log('[new list received ]',newList)\n      setInput(i);\n      setForsearch(i);\n      setnamesList(newList)\n    } else {\n      setInput(i);\n      setnamesList([]);\n    }\n\n  }\n\n\n  async function search() {\n    console.log(`[input Received]`,input);\n    const userResult = await axios.get(`/api/user/${input}`)\n    console.log(`[user received ]`,userResult);\n    setDisplay(true);\n    setResult(userResult.data[0].firstName);\n    setForsearch(userResult.data[0]._id);\n    setnamesList([]);\n    setInput('');\n  }\n async  function addFollower(){\n    const user = JSON.parse(localStorage.getItem('user'));\n    console.log('[input Received]',forsearch);  \n  \n   const  object ={\n      id:forsearch,\n      userid:user._id\n    }\n    console.log(`[object to be posted]`,object);\n    const apiResult = axios.post('/api/addFollowing',object);\n    console.log('[Added to following]',apiResult);\n    \n    \n  }\n\nif (display){\n  return (\n    <>\n      <div>\n    \n        <form style={form}>\n          <input  type=\"text\" style={inputtag} onChange={handleChange} placeholder=\"Search\" value={input} aria-label=\"Search\" />\n          <button class=\"btn btn-primary\"  style={btnStyle}  onClick={search} type=\"button\">Search</button>\n        </form>\n        <ul>{namesList.map(name => <li class=\"list-group-item\" style={liStyle} onClick={() => setInput(name)}>{name}</li>)}</ul>\n        <div>\n          <SearchResult result={result} btn={btn} addFollower={addFollower} />\n        </div>\n      </div>\n    </>\n  )\n}\nelse{\n\n  return (\n    <>\n      <div >\n        <form style={form}>\n          <input class=\"form-control\"  style={inputtag} type=\"text\" onChange={handleChange} placeholder=\"Search\" value={input} aria-label=\"Search\" />\n          <button class=\"btn btn-primary\" onClick={search} style={btnStyle} type=\"button\">Search</button>\n        </form>\n        <ul style={ulStyle}>{namesList.map(name => <li class=\"list-group-item\" style={liStyle} onClick={() => setInput(name)}>{name}</li>)}</ul>\n      </div>\n    </>\n  )\n  }\n}\nexport default SearchPage;"]},"metadata":{},"sourceType":"module"}